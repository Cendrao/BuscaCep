<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta name="description" content="" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <link href="../../Content/screen.css" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light+Two' rel='stylesheet'
        type='text/css' />
    <script type="text/javascript">
        function initialize(address) {
            var geoCoder = new google.maps.Geocoder(address)
            var request = { address: address };
            geoCoder.geocode(request, function (result, status) {
                var latlng = new google.maps.LatLng(result[0].geometry.location.Ua, result[0].geometry.location.Va);
                var myOptions = {
                    zoom: 15,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                var marker = new google.maps.Marker({ position: latlng, map: map, title: 'title' });
            })
        }

    </script>
    <script>
        $(document).ready(function () {
            initialize('Sao Paulo Brazil');
            $('#search').bind('click', function () {
                
                $.getJSON('/Home/DadosLogradouro/' + $('#cep_in').val(), function (data) {
                    $.each(data, function (key, val) {
                        // items.push('<li id="' + key + '">' + val + '</li>');
                        $("#" + key + "").html(val);
                    });


                     var end = $("#Endereco").html().substring(0, $("#Endereco").html().indexOf("-"));
                    
                    if (end == "") {
                        end = $("#Endereco").html();
                    }

                    end += ", " + $("#cep_in").val();
            
                    initialize(end);

                                  
                });


            })
        })

    </script>
    <style type="text/css">
        html
        {
            height: 100%;
        }
        body
        {
            height: 100%;
            margin: 0px;
            padding: 0px;
            background: url(../../Content/back.png) repeat;
        }
        #map_canvas
        {
            width: 529px;
            height: 400px;
        }
        .box
        {
            width: 529px;
            height: 400px;
            border: 1px solid #ccc;
            padding: 10px;
            box-shadow: 1px 1px 3px #ccc;
            background-color: white;
        }
        .search input[type=text]
        {
            float: left;
            width: 460px;
            padding: 8px;
            border: 1px solid #4B8EFA;
            box-shadow: 1px 1px 3px #ccc;
        }
        .search input[type=button]
        {
            margin-top: 7px;
            float: right;
            background-color: #4B8EFA;
            border: 0;
            display: block;
            color: white;
            padding: 8px;
            cursor: pointer;
            box-shadow: 1px 1px 3px #ccc;
        }
        h1
        {
            text-align: center;
            font-family: 'Shadows Into Light Two' , cursive;
            margin-top: 15px;
            font-size: 45px;
        }
        h2
        {
            margin-top: 15px;
        }
        p
        {
            font-size: 15px;
        }
    </style>
    <title>Busca Cep</title>
</head>
<body>
    <div class="container">
        <div class="span-24">
            <div class="push-5 span-14">
                <h1>
                    Busca Cep</h1>
                <h2>
                    Como pesquisar</h2>
                <p>
                    Este <em>Busca Cep</em> efetua uma requisição diretamente na Base de Dados dos correios.
                    <br />
                    Digite o Cep e clique no botão <em>"buscar"</em>
                </p>
            </div>
        </div>
        <div class="push-5 span-14">
            <div class="search">
                <input id="cep_in" placeholder="Digite o Cep" type="text" />
                <input id="search" type="button" value="Buscar" />
                <div class="clear">
                </div>
            </div>
            <fieldset>
                <ul>
                    <li><span><strong>Endereço: </strong></span><span id="Endereco"></span></li>
                    <li><span><strong>Bairro: </strong></span><span id="Bairro"></span></li>
                    <li><span><strong>Localidade: </strong></span><span id="Localidade"></span></li>
                </ul>
            </fieldset>
            <div class="box">
                <div id="map_canvas">
                </div>
            </div>
            <div style="text-align: center;">
                @*  <a href="http://www.jqueryload.com/google-maps-api-3-example-search-an-address">Back to the tutorial <em>Google maps Api 3 Search Address Example</em></a>*@
            </div>
        </div>
        <br />
    </div>
</body>
</html>
@ViewBag.Message
